---
title: Linux学习---inode
permalink: Linux/Linux-order-day-03
date: 2019-09-24 21:34:40
categories:
- Linux
tags:
- Linux
---

# Linux学习---inode

&emsp;&emsp;在了解什么是`inode`之前，我们首先需要知道文件存储。而文件存储在硬盘上，对于硬盘而言，最小的存储单元是`扇区(Sector)`。每个扇区存储512个字节(0.5KB)。但是在操作系统读取硬盘的时候，其实不是按照扇区进行读取的，因为如果按照扇区进行读取的话，那么会降低操作系统的的性能。因此，每个操作系统读取的时候，但是一次性的读取多个扇区。我们把这些每次读取的连续的扇区去了一个名称---`块`。在Linux系统中，一般情况下，一个文件块的大小是4KB，也就是相当于8个扇区的大小。


&emsp;&emsp;而对于操作系统而言，无论是读取文件，还是写入文件，其实都是以`块`为最小单位的。也就是说，如果我们想要存储一个9K的内容的话，此时会占用3个文件块。其中前两个文件块都会被存满，但是第三个文件块虽然有4K的大小，但是仅仅只是存放了1K的内容，这就浪费了3K的内容。虽然这个空间是浪费了。但是这个剩余的3K空间此时不可被其他的存储所用，浪费也就浪费了(原因就是前面刚刚说的那样，操作系统是以文件块作为最小的存储单位的)。

&emsp;&emsp;既然操作系统是以文件块为单位的话，因此操作系统会给每个文件的文件块进行编码，而这些编码内容也存放到硬盘中。在这里，我们不仅可以记录当前文件块的一个编码，同时我们可以记录一些其他的文件块的元信息。在Linux系统中，把这种存储文件块的元信息的区域称之为inode(索引节点);

## inode的内容

1. 文件的字节数
2. 文件拥有者的id
3. 文件拥有者的groupId
4. 文件的权限
5. 文件的时间戳
    - ctime:上一次变动的时间
    - mtime:文件内容上一次变动的时间
    - atime:文件上一次打开的时间
6. 链接数
7. 文件块的位置

### 查看命令

```shell
stat ln.txt
```

&emsp;&emsp;返回结果:

![stat ln.txt](/blog/img/Linux/Learn/Day03/inode-stat.jpg)

## inode的大小

&emsp;&emsp;在前面我们已经讲过，inode和我们要存储的数据一样，都是要保存在我们的硬盘上面的。每个inode节点的大小，一般是128字节或256字节。inode节点的总数，在格式化时就给定，一般是每1KB或每2KB就设置一个inode。假定在一块1GB的硬盘中，每个inode节点的大小为128字节，每1KB就设置一个inode，那么inode table的大小就会达到128MB，占整块硬盘的12.8%。

&emsp;&emsp;
## inode的号码

## 目录文件

