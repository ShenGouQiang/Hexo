---
title: Java-BIO NIO AIO
permalink: Java/JDK/IO/JavaBioNioAio
date: 2020-06-10 23:32:35
categories:
- Java
- JDK
tags:
- Java学习
- JDK学习
- IO模型
---

# Java 的 BIO NIO AIO

## 什么是IO

在讲解BIO、NIO、AIO之前，我们先来确认下，什么是IO。对于Java而言，我们的IO，一共可以分为4种操作

1. 基于InputStream、OutputStream的字节流IO操作
2. 基于Writer、Reader的字符流IO操作
3. 基于File的磁盘IO操作
4. 基于Socket的网络IO操作

以上的四种IO操作，是我们最最基本的IO操作。基于这些IO操作，我们通过不同的技术手段，又可以分为同步方式与异步方式，阻塞方式与非阻塞方式。

## 同步 异步

同步就是一个任务的完成需要依赖另外一个任务时，只有等待被依赖的任务完成后，依赖的任务才能算完成，这是一种可靠的任务序列。要么成功都成功，失败都失败，两个任务的状态可以保持一致。而异步是不需要等待被依赖的任务完成，只是通知被依赖的任务要完成什么工作，依赖的任务也立即执行，只要自己完成了整个任务就算完成了。至于被依赖的任务最终是否真正完成，依赖它的任务无法确定，所以它是不可靠的任务序列。我们可以用打电话和发短信来很好的比喻同步与异步操作。

## 阻塞 非阻塞

阻塞与非阻塞主要是从 CPU 的消耗上来说的，阻塞就是 CPU 停下来等待一个慢的操作完成 CPU 才接着完成其它的事。非阻塞就是在这个慢的操作在执行时 CPU 去干其它别的事，等这个慢的操作完成时，CPU 再接着完成后续的操作。虽然表面上看非阻塞的方式可以明显的提高 CPU 的利用率，但是也带了另外一种后果就是系统的线程切换增加。增加的 CPU 使用时间能不能补偿系统的切换成本需要好好评估。

剩下的就是他们之间的一个组合，接下来，我们通过一个例子，来进行通俗的解释。

假如有一天，你的老婆出差了，家里就剩下你和你的儿子，而你们要烧一壶水，通过不同的父子表现，我们来解析不同的组合。

| 组合方式   | 通俗解释                                                     |
| ---------- | ------------------------------------------------------------ |
| 同步阻塞   | 你让你儿子烧一壶水，在烧水的期间，你就一直在客厅等着水开，而你的儿子看着水壶，什么时候水烧开了，你儿子告诉你，你把热水拿走。 |
| 同步非阻塞 | 你让你儿子烧一壶水，在烧水的期间，你就一直在客厅等着谁开，而你的儿子在把水壶通电后，就去玩游戏去了，等什么时候水壶开，什么时候告诉你，你把热水拿走。 |
| 异步阻塞   | 你让你儿子烧一壶水，在烧毁的期间，你吃着零食，看着电视，而你的儿子看着水壶，什么时候水烧开了，你儿子告诉你，你把热水拿走。 |
| 异步非阻塞 | 你让你儿子烧一壶水，在烧毁的期间，你吃着零食，看着电视，而你的儿子在把水壶通电后，就去玩游戏去了，等什么时候水壶开，什么时候告诉你，你把热水拿走。 |

在以上的四种方式中，无疑，第四种方式是效率最高的一种方式，也是我们一直所追求的方式。